{"path":"UNISA/98906 - BSc Science in Computing/INF3707 - Database Design and Implementation/Unsorted/INF3707/INF3707 Exam pack/Exam Shit/Materials/Slides/Orcl12_SQL_IM_ch04.pdf","text":"Oracle 12c: SQL 4-1 Chapter 4 Constraints At a Glance Instructor’s Notes ♦ Chapter Overview ♦ Chapter Objectives ♦ Instructor Notes ♦ Troubleshooting Tips ♦ Quick Quizzes ♦ Discussion Questions ♦ Key Terms Oracle 12c: SQL 4-2 Chapter Overview This chapter addresses ensuring data integrity and the enforcement of business rules and policies in a database. Although most constraints can be created at either the column or table level, all constraints are enforced at the table level. A constraint can be temporarily disabled and then re- enabled at a later time. If a constraint will no longer be needed in the database, it can be permanently removed using the DROP command. It is important that students understand that the purpose of constraints is to ensure data integrity. Students will need the privileges to create constraints and the ability to query data dictionary views to complete the tasks in this chapter. Chapter Objectives After completing this chapter, you should be able to do the following: ♦ Explain the purpose of constraints in a table ♦ Distinguish among PRIMARY KEY, FOREIGN KEY, UNIQUE, CHECK, and NOT NULL constraints and understand the appropriate use for each constraint ♦ Understand how constraints can be created when creating a table or when modifying an existing table ♦ Distinguish between creating constraints at the column level and at the table level ♦ Create PRIMARY KEY constraints for a single column and a composite primary key ♦ Create a FOREIGN KEY constraint ♦ Create a UNIQUE constraint ♦ Create a CHECK constraint ♦ Create a NOT NULL constraint using the ALTER TABLE…MODIFY command ♦ Include constraints during table creation ♦ Add multiple constraints on a single column ♦ View constraint information ♦ Use DISABLE and ENABLE commands ♦ Use the DROP command Instructor Notes Creating Constraints If a database is discovered to contain erroneous data, management will not be willing to rely on the system for decision-making purposes. In addition, feelings of ill-will may occur if employees are required to work with the DBMS when they know the database is full of errors and basically serves no useful purpose. Constraints can be created at the column level by including the constraint as part of the column definition or at the table level by defining the constraint after all Oracle 12c: SQL 4-3 columns have been defined. When created at the column level, the column that is the objective of the constraint is identified first, and then the constraint information is provided. If created using the table level approach, the type of constraint is identified first, and then the column is identified. A constraint can be assigned a name when it is created; otherwise, the Oracle server will assign a name using the format SYS_Cn. Using a naming convention that will indicate information regarding the constraint is quite helpful to a database developer. When constraint violations occur, the name will then help to quickly identify the specific problem. Troubleshooting Tip When an example is presented in the textbook, have students identify which approach is used and how they were able to identify the approach. Quick Quiz 1. What type of constraint cannot be created using the table level approach? ANSWER: A constraint on more than one column 2. What is required if the CONSTRAINT keyword is included when the constraint is created? ANSWER: A name must be specified for the constraint. 3. If a name is not specified for the constraint, what will happen? ANSWER: The Oracle server will assign a constraint name using the default format of SYS_Cn. 4. A NOT NULL constraint can only be created at which level? ANSWER: The column level 5. With which approach is the column name specified before the constraint type is specified? ANSWER: The column level Using the PRIMARY KEY Constraint The PRIMARY KEY constraint designates the primary key for a table. Each table can have only one PRIMARY KEY constraint. If a primary key consists of more than one column, it is considered to be a composite primary key and it must be created using the table level approach. The ALTER TABLE command with the ADD clause can be used to add a PRIMARY KEY constraint to an existing table. When a PRIMARY KEY constraint has been added to a column, the DESCRIBE command will display that the column cannot contain NULL values. This is because a PRIMARY KEY constraint will not allow duplicate values or NULL values in that column. A PRIMARY KEY enforces two rules: NOT NULL and UNIQUE. Oracle 12c: SQL 4-4 Troubleshooting Tip A typical error is including a separate NOT NULL constraint on a PRIMARY KEY column, which duplicates checking for NULL values. Quick Quiz 1. A PRIMARY KEY constraint prevents what from occurring? ANSWER: Prevents duplicate values and NULL values from being entered into the specified column 2. What is the maximum number of PRIMARY KEY constraints that can exist in each database table? ANSWER: One 3. If a PRIMARY KEY constraint references more than one column, how is the constraint created? ANSWER: Using the table level approach 4. Which command is used to add a PRIMARY KEY constraint to an existing table? ANSWER: ALTER TABLE command 5. Which clause of the ALTER TABLE command is used to add a PRIMARY KEY constraint to a table? ANSWER: ADD Using the FOREIGN KEY Constraint A FOREIGN KEY constraint is used to ensure referential integrity. A FOREIGN KEY constraint is always placed on the “many” side of a one-to-many relationship. This basically requires that a referenced value must exist in the parent table. Unless the constraint was created with the ON DELETE CASCADE keywords, then the referenced value in the parent table cannot be deleted if corresponding rows in the child table exist. With the ON DELETE CASCADE keywords, the rows in the child table will be deleted also. In addition, the FOREIGN KEY constraint can only reference a column that has already been designated as the primary key for the parent table. Oracle 12c: SQL 4-5 Quick Quiz 1. A FOREIGN KEY constraint is used to enforce what type of integrity? ANSWER: Referential 2. A FOREIGN KEY constraint is added to which table in a one-to-many relationship? ANSWER: The table representing the many side 3. Which keyword is used to identify the table being referenced by the FOREIGN KEY constraint? ANSWER: REFERENCES 4. If a FOREIGN KEY constraint was created with the ON DELETE CASCADE keywords and a row is deleted from the parent table, what happens to the corresponding rows in the child table? ANSWER: They are automatically deleted. 5. If a FOREIGN KEY constraint is added to a column, can that column contain NULL values? ANSWER: Yes Using the UNIQUE Constraint The UNIQUE constraint is used to ensure that no duplicate values exist in the specified column(s). Unlike the PRIMARY KEY constraint, the UNIQUE constraint will allow NULL values to be entered into the column. Using the CHECK Constraint A CHECK constraint is used to validate the data being entered into the database. It can ensure that values are within a certain range (using the BETWEEN comparison operator), exist within an identified list (using the IN comparison operator), etc. In addition, the condition specified within the constraint can reference other values within the same row. However, it cannot Oracle 12c: SQL 4-6 reference values in other rows. In addition, it cannot reference pseudocolumns or dynamic values, such as SYSDATE. Troubleshooting Tip Highlight that if a value violates a constraint, the entire row will be rejected. Quick Quiz 1. A condition can be stated in what type of constraint? ANSWER: A CHECK constraint 2. Can SYSDATE be referenced by a CHECK constraint? ANSWER: No 3. A CHECK constraint can be added to an existing table using what command? ANSWER: ALTER TABLE 4. Which clause of the ALTER TABLE command is used to add a CHECK constraint? ANSWER: ADD 5. Can a CHECK constraint be used to make certain that the value being entered into the specified column of the current row is greater than values entered into another row? ANSWER: No Using the NOT NULL Constraint The NOT NULL constraint is a special CHECK constraint with the condition IS NOT NULL. A NOT NULL constraint can only be created using the column level approach. Oracle 12c: SQL 4-7 Quick Quiz 1. A NOT NULL constraint is a special ________ constraint. ANSWER: CHECK 2. A NOT NULL constraint is a CHECK constraint with the condition of ___________. ANSWER: IS NOT NULL 3. Which command is used to add a NOT NULL constraint to an existing table? ANSWER: The ALTER TABLE command 4. Which clause is used with the ALTER TABLE command to add a NOT NULL constraint to a table? ANSWER: MODIFY 5. If you are adding a row to a table and one of the table columns has a NOT NULL constraint, what happens if you attempt to leave that column blank? ANSWER: It will violate the constraint, and the entire row will be rejected. Including Constraints during Table Creation During the design and development of the database tables, any necessary constraints should be identified. When the necessary constraints are known before the database tables are created, the constraints can be included in the CREATE TABLE command. This will save a lot of time because the user will not need to go back to add the constraints later. Introduce defining constraints at the table level. This method is preferred by some database developers, as the list of constraints is easily identifiable. Oracle 12c: SQL 4-8 Quick Quiz 1. When including constraints in the CREATE TABLE command, which approach can be used: a column level or table level approach? ANSWER: Both approaches can be used, except for NOT NULL constraints or constraints based on more than one column. 2. If the table level approach is used to define constraints in the CREATE TABLE command, are the constraints specified before or after the parenthesis that closes the column list? ANSWER: Before 3. When the table level approach is used to define constraints in the CREATE TABLE command, where is the constraint defined? ANSWER: After the relevant column has been defined, but before the comma Multiple Constraints on a Single Column A column can be assigned as many constraints as necessary. Each constraint is processed separately. Many students are confused with assigning multiple constraints to a column, particularly with columns that may need both a PRIMARY KEY and FOREIGN KEY constraint assigned. Viewing Constraints Querying the USER_CONSTRAINTS view will display information about constraints. This view will retrieve data contained in the data dictionary regarding constraints owned by the user. The CONSTRAINT_TYPE column of the view will identify the type of constraint being displayed. If the constraint is a CHECK constraint including a NOT NULL constraint, a search condition will be specified in the SEARCH_CONDITION condition. If it is a NOT NULL constraint, the search condition will always be listed as IS NOT NULL. Troubleshooting Tip Display all of the constraints currently owned by the user through the USER_CONSTRAINTS view. Do not include the WHERE clause, and have the students attempt to identify the various constraints that are displayed (i.e., which table each one belongs to, what type, etc.). Oracle 12c: SQL 4-9 Quick Quiz 1. What is stored in the data dictionary? ANSWER: Information about database objects 2. What view can be used to see information about a constraint created by the user? ANSWER: USER_CONSTRAINTS 3. Why is a NOT NULL constraint type identified in the USER_CONSTRAINTS view with the letter C? ANSWER: Because it is a special CHECK constraint 4. How is a FOREIGN KEY constraint identified in the USER_CONSTRAINTS view? ANSWER: With the letter R for referential integrity 5. If SYS_C68414 is displayed as a constraint name in the USER_CONSTRAINTS view, what does that indicate? ANSWER: The constraint name was most likely assigned by the Oracle server. Disabling and Dropping Constraints Each time a DML operation is performed on a table (i.e., adding, changing, or deleting data), the Oracle server must check to make certain the operation will not violate a constraint. If massive changes are being performed or large amounts of data are being loaded into the table, the verification process drastically slows down. Users have the option of disabling a constraint and then re-enabling the constraint after the data changes have been made. The data contained in the table will still need to adhere to the guidelines of the constraint after it has been enabled. Otherwise, the constraint will not be enabled and an error message will be displayed. Once the data has been corrected, the constraint can be enabled. If it is determined that the constraint is no longer required, the constraint can be permanently removed using the DROP clause of the ALTER TABLE command. Quick Quiz 1. What command is used to disable a constraint? ANSWER: The ALTER TABLE command 2. What clause is used with the ALTER TABLE command to enable a previously disabled constraint? ANSWER: ENABLE CONSTRAINT Oracle 12c: SQL 4-10 3. When dropping a PRIMARY KEY constraint, why isn’t the user required to specify the name of the constraint or at least the column referenced by the constraint? ANSWER: There can only be one PRIMARY KEY constraint for a table; therefore, identifying the name of the table and the type of constraint is sufficient. 4. When dropping a UNIQUE constraint, why isn’t the user required to specify the name of the constraint? ANSWER: Each column of a table can only have one UNIQUE constraint; therefore, specifying the constraint type and column name is sufficient to identify the exact constraint that is to be dropped. 5. Which types of constraints require that the constraint name be specified when the constraint is dropped? ANSWER: NOT NULL, FOREIGN KEY, CHECK constraints Discussion Questions 1. Describe a business scenario and specify the types of constraints that would be appropriate to ensure the integrity of the database. For example, an airline reservation system should not make a reservation in which the return date is earlier than the departure date. 2. If one purpose of a constraint is to ensure data integrity, then why would a user ever disable a constraint? Key Terms child table — A table having data that reference data within a parent table. Considered the “many” side in a one-to-many relationship. constraints — Rules that ensure the accuracy and integrity of data. Constraints prevent data that violate these rules from being added to tables. Constraints include PRIMARY KEY, FOREIGN KEY, UNIQUE, CHECK, NOT NULL. data dictionary — Oracle 12c stores all information about database objects in this \"dictionary.\" Stored information includes objects' names, types, structures, owners, and the identity of users who have access to each object. referential integrity — When a user refers to something that exists in another table, the REFERENCES keyword is used to identify the table and column that must already contain the data being entered.","libVersion":"0.2.3","langs":""}